# 计算机网络

## 计算机网络和因特网

### 因特网

### 网络编译

### 网络核心

## 应用层

### 应用层协议原理

### Web和TTTP

### 因特网中的电子邮件

### DNS

### P2P

### 视频流和内容发布分发网

### 套接字编程

- UDP

	- 分配端口的两种方法

		- 创建一个UDP套接字时，传输层自动的该套接字分配端口（通常从1024~65535选一个）
		- 创建一个UDP套接字后，通过调用bind（）函数为该套接字绑定一个特定的端口

- TCP

## 运输层

### 运输层服务

### 多路复用与多路分解

### 无连接运输：UDP

### 可靠数据传输原理

### 面向链接的运输：TCP

### 拥塞控制原理

- TCP拥塞控制

## 网络层：数据平面

### 数据平面

- 网络 层概述
- 路由器工作原理
- 网际协议

	- IPv4
	- IPv6
	- 寻址

- 通用转发和SDN

### 控制平面

- 概述
- 路由选择算法
- 因特网中自治系统内部的路由
- ISP之间的路由选择
- SDN控制平面
- ICMP：因特网控制报文协议

### 链路层和局域网

- 链路层概述
- 差错检测和纠正技术
- 多路访问链路和协议
- 交换局域网
- 链路虚拟化：网络作为链路层
- 数据中心网络

### 无线网络和移动网络

- 概述
- 无线链路和网络特征
- WiFi：802.11无线LAN
- 蜂窝因特网接入
- 移动管理：原理
- 移动IP
- 管理蜂窝网络中的移动性
- 无线和移动性：对高层协议的影响

### 计算机网络中的安全

- 概述
- 密码学的原则
- 端点鉴别
- 安全电子邮件
- 使TCP连接安全：SSL
- 网络层安全新：IPsec和虚拟
- 使无线LAN安全
- 运行安全性

### 多媒体网络

- 多媒体网络应用
- 流式存储视频
- IP语言
- 实时会话式应用协议
- 支持多媒体网络

## 计算机网络概述

### 计算机网络基本概念

计算机网络是计算机技术与通信技术相互融合的产物。

- 网络定义

  计算机网络是互联的、自治的计算机的集合。

- 协议定义

  协议是网络通信实体之间在数据交换过程中需要遵循的规则或约定，是计算机网络有序允许的重要保证。

	- 协议的基本三要素

		- 语法

		  语法（syntax）
		  语法定义实体之间交换信息的格式与结构，或者定义之间传输信号电平等。

		- 语义

		  语义（semantics）
		  语义定义实体之间交换的信息中需要发送哪些信息，这些信息的具体含义，以及针对不同含义的控制信息，接收信息端应如何响应。

		- 时序

		  时序（timing）
		  时序也称为同步，定义实体之间交换信息的顺序以及如何匹配或适应彼此的速度。

- 网络功能

	- 硬件资源共享

	  通过计算机网络，一台主机可以共享使用另一台主机的硬件资源，包括计算资源（如CPU），存储资源，打印机扫描仪等I/O设备等。
	  典型的硬件资源共享实例：云计算、云存储

	- 软件资源共享

	  网络上的主机可以远程访问、使用服务器计算机上运行的各类软件。
	  软件即服务：Software as a Service：SaaS
	  SaaS是目前互联网环境下软件共享的典型形式。

	- 信息资源共享

	  计算机网络所支持的信息交换就是典型的信息共享。

- 网络分类

	- 按覆盖范围分类

		- 个域网（Personal Area Network，PAN）

		  个人设备通过无线通信技术构成小范围网络，实现个人设备间的网络传输，比如通过蓝牙技术实现个人设备的互联等。
		  个域网通常覆盖的范围是1m~10m。

		- 局域网（Local Area Network，LAN）

		  局域网通常部署在办公室、办公楼、厂区、校园等局部区域内，采用高速有线或无线链路连接主机，实现局部范围内高速数据传输。
		  局域网通常覆盖范围在10m~1km。

		- 城域网（Metropolitan Area Network，MAN）

		  城域网是指覆盖一个城市范围的网络，覆盖范围通常在5km~50km。

		- 广域网（Wide Area Network，WAN）

		  广域网覆盖范围在几十千米到几千千米，通常跨越更大的地理空间，可以实现异地城域网或局域网的互联。

	- 按拓扑结构分类

		- 星型拓扑结构

			- 特点

				- 一个中央结点
				- 主机通过点对点通信与中央结点连接
				- 主机之间的通信都需要经过中央结点进行

			- 优点

				- 易于监控与管理
				- 故障诊断
				- 隔离容易

			- 缺点

				- 中央结点是网络的瓶颈
				- 中央结点故障全网瘫痪
				- 网络规模受限于中央结点端口的数量

			- 常见网络

				- 个域网
				- 局域网

		- 总线型拓扑结构

			- 特点

				- 采用一条广播信道作为公共传输介质——总线
				- 所有结点均与总线连接
				- 结点间的通信均通过共享总线进行

			- 优点

				- 结构简单
				- 所需电缆数量少
				- 易于扩展

			- 缺点

			  由于总线是一条广播信道，所以任一结点通过总线发送数据时，其他结点都会接收到承载这些数据的信号。如果有两个或两个以上的结点同时向共享信道中发送数据，就会产生干扰，会导致任何一个结点的发送失败。这一现象称为冲突。

				- 通信范围受限
				- 故障诊断与各类较困难
				- 容易产生冲突

			- 常见网络

				- 早期局域网

		- 环形拓扑结构

			- 特点

				- 各个结点通过通信链路连成一个闭环
				- 环中数据传输通常是单向（双向）
				- 每个结点可从环中接收数据，并进一步转发数据
				- 如果结点发现数据是自己的则复制数据
				- 数据会沿特定方向环绕一周回到发送数据的结点
				- 结点需要负责从环中清除其发送的数据

			- 优点

				- 所需电路长度短
				- 可以使用光纤
				- 易于避免冲突

			- 缺点

				- 某结点的故障容易引起全网瘫痪
				- 新结点的加入或撤出比较麻烦
				- 存在等待时间问题

			- 常见网络

				- 局域网
				- 园区网
				- 城域网

		- 网状拓扑结构

			- 特点

				- 通过多条链路与不同结点连接
				- 完全网状拓扑网络

					- 任一结点与其余结点均有直接的链路连接

			- 优点

				- 网络可靠性高

			- 缺点

				- 网络结构复杂
				- 造价成本高
				- 选路协议复杂

			- 常见网络

				- 广域网
				- 核心网络

		- 树形拓扑结构

			- 特点

				- 总线型拓扑或星形型拓扑的扩展
				- 级联星形拓扑结构网络

			- 优点

				- 易于扩展
				- 故障隔离容易

			- 缺点

				- 对根结点可靠性要求高
				- 根结点故障会导致大范围无法通信

			- 常见网络

				- 局域网

		- 混合拓扑结构

			- 特点

				- 由两种以上简单拓扑结构网络混合连接而成

			- 优点

				- 易于扩展
				- 可以构建不同规模网络
				- 可以根据需要优选网络结构

			- 缺点

				- 网络结构复杂
				- 管理与维护复杂

			- 常见网络

				- 绝大多数实际网络

					- Internet

	- 按交换方式分类

	  数据交换是指网络通过彼此互连的结点间的数据转接，实现将数据从发送结点送达目的结点的过程和技术。

		- 电路交换网络
		- 报文交换网络
		- 分组交换网络

	- 按网络用户属性分类

		- 公用网（public network）
		- 私有网（private network）

### 计算机网络结构

- 网络边缘（network edge）

  连接到网络上的计算机、服务器、智能手机、智能传感器、智能家电等称为主机或端系统。这些端系统位于网络的最边缘，因此，连接到网络上的所有端系统构成了网络边缘。
  网络边缘为网络用户提供网络应用服务。

- 接入网络（access network）

	- 常见接入网络技术分类

		- 电话拨号接入

		  电话拨号接入是利用电话网络，通过调制解调器（modem）将数字信号调制到模拟电话线路，通过电话网络的模拟语音信号作为载波传送到远端，再利用调制解调器将数字信号从模拟信号解调出来。

		- 非对称数字用户线路
		- 混合光纤同轴电缆HFC接入网络
		- 局域网
		- 移动接入网络

- 网络核心（network core）

  网络核心是由通信链路互连的分组交换设备构成的网络，作用是实现网络边缘中主机之间的数据中继与转发。

### 数据交换技术

- 电路交换

  电路交换 circuit switching
  电路交换是最早出现的一种交换方式，距今已有100多年的历史，而电话网络则是最早、最大的电路交换网络。

	- 建立电路
	- 传输数据
	- 拆除电路

- 报文交换

  报文交换 message switching
  当主机间交换的数据具有随机性和突发性时，采用电路交换方法的缺点是信道容量和有效实际的浪费，于是提出了报文交换方法。

	- 发送方构建完整报文
	- 以存储-转发的方式传送报文

- 分组交换

	- 分支交换基本原理

	  分支交换需要将待传输数据（即报文）分割成较小的数据块，每个数据块附加上地址、序号等控制信息构成数据分组（packet），每个分组独立传输到目的地，目的地将收到的分组重新组装，还原报文。
	  分组传输过程通常页式采用存储-转发交换方式。

	- 分组交换优点

		- 交换设备存储容量要求低
		- 交换速度快
		- 可靠传输效率高
		- 更加公平

	- 分组长度的确定

		- 分组长度与延迟时间

			- 其他条件相同条件下

				- 分组长度越长，延迟时间越长

		- 分组长度与误码率

		  分组长度以16B（1B=8bit）到4096B之间的2^n B为标准长度，如32B、64B、256B、512B、1024B等。

### 计算机网络性能

- 速率与宽带

	- 速率

	  速率（rate）是指网络单位时间内传送的数据量，用于描述网络传输数据的快慢，也称为数据传输率或数据速率。

	- 带宽

	  在通信或信号处理领域中，带宽（bandwidth）原本是指信号具有的频带宽度，即信号成分的最高频率与最低频率之差，单位为Hz。
	  在计算机网络中，当描述一条链路或信道的数据传输能力时，经常使用带宽一词表示链路或信道的最高数据速率，单位也是：bit/s。
	  由于带宽具有不同的含义与单位，所以有时需要明确说明或者根据上下文判断其具体含义和单位。

- 时延

  时延 delay
  时延是评价计算机网络性能的另一个重要的性能指标，也称延迟。
  时延是指数据从网络的一个结点到另一个结点所需要的时间。

	- 分组跳转产生的4类时延

		- 结点 处理时延
		- 排队时延
		- 传输时延
		- 传播时延

	- 时延带宽积

	  G=d * R
	  
	  G：时延带宽积

- 丢包率
- 吞吐量

### 计算机网络体系结构

- 计算机网络分层体系结构

  按照分层的思想，计算机网络完成的所有功能可以划分为若干层，每层完成一部分子功能，每层在完成相应功能时与另一通信实体的相同层按照某种协议进行信息交换。这样，计算机网络所划分的层次以及各层协议的集合称为计算机网络体系结构。

- OSI参考模型

  负责制定国际标准的国际标准化组织ISO参考IBM的SNA和其他计算机厂商的网络体系结构，提出了开放系统互联（Open System Interconnection）参考模型，简称OSI参考模型，按照这个标准设计建成的计算机网络中的设备都可以互相通信。

	- OSI参考模型

	  OSI参考模型采用分层结构化技术，将整个计算机网络的通信功能分为7层。

		- 应用层

		  应用层为用户提供了一个使用网络应用的接口。

		- 表示层

		  表示层主要用于处理应用实体间交换数据的语法，其目的是解决格式和数据表示的差别，从而为应用层提供一个一致的数据格式，使字符、格式等有差异的设备之间相互通信。
		  除此之外，表示层还可以实现文本压缩/解压缩、数据加密/解密、字符编码的转换等功能。

			- 功能

				- 处理应用实体间交换数据的语法
				- 解决格式和数据表示的差别
				- 为应用层提供一个一致的数据格式
				- 实现文本压缩/解压缩、数据加密/解密、字符编码的转换

			- 特点

				- 在某些实际数据通信网络中是由应用层来实现的
				- 而且表示层不独立存在

		- 会话层

		  会话层是指用户与用户的连接、通过两台计算机之间建立、管理和终止通信来完成对话。

			- 主要功能

			  在实际的网络中，会话层的功能已经被应用层所覆盖，很少单独存在

				- 在建立会话时核实双方身份是否有权参与会话
				- 确定双方支付通信费用
				- 双方在各种选择功能方面（全双工\半双工）取得一致
				- 在会话建立以后，需要对进程间的对话管理与控制

		- 传输层

		  传输层是第一个端到端的层次，也是进程到进程的层次。
		  数据的通信表面上看是在两台主机之间进行，但实际上是发生在两台主机进程之间。
		  OSI前三层可组成公共网络，被很多设备共享，并且计算机到交换结点，交换结点到交换结点是按照接力的方式传送的。
		  为了防止传送图中报文的丢失，两个主机的进程之间需要实现端到端的控制。
		  因此、传输层的的功能主要包括复用/分解、端到端的可靠数据传输、连接控制、流量控制和拥塞控制等机制。

		- 网络层

		  网络层解决的核心问题是如何将分组通过交换网络传送至目的主机，因此，网络层的主要功能是数据转发与路由。

		- 数据链路层

		  数据链路层的主要功能是实现在相邻结点之间数据可靠而有效的传输。

		- 物理层

		  物理层的主要功能是在传输介质上实现无结构比特流传输。
		  无结构比特流是指不关心比特流实际代表的信息内容，只关心如何将0和1这些比特以合适的信号传送到目的地，因此，物理层要实现信号编码功能。

			- 实现信号编码
			- 规定设备之间的特性

				- 机械

					- 说明机械特点（物理特性）

						- 接口形状
						- 尺寸
						- 插脚数量
						- 插脚排列方式

				- 电气

					- 规定在物理连接上

						- 电平大小
						- 接收器和发送器电路特性
						- 信号识别
						- 最大传输速率
						- 说明物理接口信号线用途

				- 功能
				- 规程

	- OSI参考模型相关术语

		- 数据单元

		  在层的实体之间传送的比特组称为数据单元。

		- 服务访问点

		  相邻层间的服务是通过其接口面上的服务访问点（Service Access Point，SAP）进行的，N层SAP就是（N+1）层可以访问N层的地方。
		  每个SAP都有一个唯一的地址号码。

		- 服务原语

		  层与层之间提供服务的原语描述

			- 请求

			  请求 Request
			  用户实体请求服务做某种工作。

			- 指示

			  指示 Indication
			  用户实体被告知某件事发生。

			- 响应

			  响应 Response
			  用户实体表示对某件事的响应

			- 证实

			  证实 Confirm
			  用户实体收到关于它的请求的答复

		- 面向链接的服务和无连接的服务

- TCP/IP参考模型

	- 应用层

	  TCP/IP参考模型将OSI参考模型中会话层和表示层的功能合并到了应用层来实现。
	  
	  处理报文。
	  
	  每一种应用都使用了相应的协议来将用户的数据（网页、文件、电子邮件等）按照协议定义的格式进行封装，以便达到对应的控制功能，然后再利用下一层即传输层的协议进行传输。

	- 传输层

	  传输层负责再网络层和应用层之间传递消息，丝毫不会涉及消息如何再网络中传输，这个任务交给下面的网络互联层去解决。

	- 网络互联层

	  网络互联层是整个TCP/IP参考模型的核心，主要解决把数据分组发往目的网络或主机的问题。
	  在这个过程中，要为分组的传输选择相应的路径（路由选择），完成分组的转发，提供网络层寻址——IP地址。
	  网络互联层除了需要完成路由的功能外，也可以完成将不同类型的网络（异构网）互联的任务。

	- 网络接口层

	  实际上，TCP/IP参考模型没有真正描述这一层的实现，只是要求能够提供给其上一层——网络互联层一个访问接口，以便在其上传递IP分组。
	  由于这一层未被定义，所有其具体的实现方法将随着网络类型的不同而不同。
	  实际上，这一层对应OSI参考模型中的数据链路层和物理层，网络层IP分组在这一层被封装到底层网络的链路层数据帧中，并最终以比特流的形式在物理介质上进行传输。

- 五层参考模型

  用户的数据在应用层以报文的形式开始向下一层进行封装，形成段、数据报、帧，最后以比特流的形式进行传输。
  在中间结点处，例如路由器、交换机，分别从对应的数据报、帧中取出相应的路由或地址信息并进行处理，并依据转发策略向正确的接口转发数据报或帧。
  当数据到达目的主机后，自下而上，逐层处理并去掉相应的头部信息，最终还原为最初的报文，交付给用户。

	- 物理层
	- 数据链路层
	- 网络层
	- 传输层
	- 应用层

### 计算机网络发展简史

## 网络应用

### 计算机网络应用体系结构

- 分类

	- 客户/服务（C/S)网络应用

	  在现代计算机网络中，网络应用程序之间的基本模式就是C/S方式通信。
	  在C/S通信过程中，主动发起通信的一方就是客户，被动接受通信的一方就是服务器。

	- 纯P2P（Peer to Peer）网络应用

	  对等端软件通常运行在普通用户的计算设备上，可以动态地直接与其他对等端进行通信。
	  任何一个对等端既可以主动发起请求另一个对等端的服务，也可以被动地为其他对等端提供服务。
	  因此，P2P应用中的每个对等端都同时具备C/S应用的客户与服务器的特征，是一个服务器与客户的结合体。事实上，P2P应用中的对等端软件包括服务器软件与客户端软件。

	- 混合网络应用

	  混合结构网络应用将C/S应用与P2P应用相结合，既有中心服务器的存在，又有对等端（客户）间的直接通信。

### 网络应用通信基本原理

- 网络应用的基本通信过程

  网络应用的基本通信过程就是运行在不同主机上的应用进程间以C/S方式进行的通信。

- 网络应用与传输层服务
- 应用编程接口API的概念
- 网络应用进程的标识
- IP地址与端口号

  IP地址是Internet的网络层地址，用于唯一标识一个主机或路由器接口。
  对于一个传输层协议，需要为与其接口的每个套接字分配一个编号，标识该套接字，该编号称为端口号（port number）

### 典型网络应用及应用层协议

- 作用

  套接字是每个应用进程与其他应用进程进行网络通信时，真正收发报文的通道

- 特点

  一个应用进程可以创建多个套接字与同一个或不同传输层协议进行接口。

- 应用层协议

### 域名系统（DNS）

domain name system

- 域名结构

	- 顶级域名

		- 国际顶级域名

			- cn-中国
			- us-美国
			- uk-英国

		- 通用顶级域名

			- com-公司和企业
			- net-网络服务机构
			- org-非盈利性组织
			- edu-专业教育机构
			- gov-专用政府部门
			- mil-专用军事部门
			- int-国际组织

	- 二级域名
	- 三级域名
	- 四级域名

- DNS的主要功能

  将域名映射为IP地址

- 各类域名服务器

	- 根域名服务器
	- 顶级域名服务器
	- 权威域名服务器
	- 中间域名服务器

- DNS的解析过程

	- 递归解析

	  提供递归查询服务的域名服务器，可以代替查询主机或其他域名主机，进行进一步的域名查询，并将最终解析结果发送给查询主机或服务器。

	- 迭代解析

	  提供迭代查询的服务器，不会代替查询主机或其他域名服务器，进行进一步的查询，只是将下一步要查询的服务器告知查询主机或服务器，如果该服务器拥有最终解析结果，则直接响应解析结果。

### 万维网应用

万维网（world wide web，www）
万维网应用也叫web应用

### HTTP

- 版本

	- HTTP/0.9

		- 设计初衷是为了获得简单的HTML对象
		- 只支持GET请求
		- 没有定义任何首部
		- 不支持多媒体内容MIME类型和协议版本号

	- HTTP/1.0

		- 增加

			- 协议版本号
			- 各种首部行
			- 额外的方法
			- 对多媒体的支持

	- HTTP/1.0+

		- 非正式的HTTP/1.0扩展版本

			- keep-alive连接
			- 虚拟主机支持
			- 代理连接

	- HTTP/1.1

		- 支持更多的请求方法
		- 扩展了一些首部
		- 增加了响应状态码
		- 改进了对缓存的支持
		- 重点

			- 校正了HTTP设计中的结构缺陷
			- 明确了语义
			- 引入了重要的性能优化措施
			- 删除了一些不良特性

	- HTTP/2.0

	  HTTP/2.0最初称为HTTP-NG，是HTTP/1.1后继结构的原型建议，重点关注性能优化以及强大的服务逻辑远程执行框架。

- 连接

  HTTP基于传输层的TCP传输报文。
  浏览器在向服务端发送请求之前，首先需要建立TCP连接，然后才能发送HTTP请求报文，并接收HTTP响应报文。
  根据HTTP在使用TCP连接的策略不同，可以分为非持久连接的HTTP和持久连接的HTTP。

	- 非持久连接

	  HTTP/1.0 默认使用非持久连接，每次请求传输一个对象都需要新建立一个TCP连接

		- 客户端与服务端建立TCP连接
		- 发送HTTP请求报文
		- 接收HTTP响应报文
		- 断开连接

	- 并行连接

		- 通过建立多条并行的TCP连接
		- 并行发送HTTP请求
		- 并行接收HTTP响应

	- 持久连接

		- 非流水方式持久连接

		  非流水方式持久连接也称非管道方式持久连接，客户端在通过持久连接收到前一个响应报文后，才能发出对下一个对象的请求报文。
		  与非持久连接相比，连续请求多个对象时，只需建立一次TCP连接，这样，每次取一个对象只需1个RTT（往返时间 Round Trip Time，RTT）时间。

		- 流水方式持久连接

		  流水方式持久连接也称管道方式持久连接，客户端在通过持久连接收到前一个对象的响应报文之前，连续依次发送对后续对象的请求报文，然后再通过该连接依次接收服务器发回的响应报文。
		  使用流水方式持久连接，获取一个对象平均时间远小于1个RTT时间，如果忽略对象传输时间，连续请求多个对象只需1个RTT时间。

- 报文

	- 组成

		- 起始行（start line）
		- 首部行（header line）
		- 空白行（blank line）

			- 只有CRLF

		- 实体主体（entities body）

			- 可以是文本或二进制数据

	- 分类

		- 请求报文
		- 响应报文

### Internet电子邮件

- 电子邮件系统结构

	- 邮件服务器

		- 发送和接收邮件
		- 报告发送情况

	- 简单邮件传输协议（SMTP）

	  SMTP是internet电子邮件核心应用层协议，实现邮件服务器之间或用户代理到邮件服务器之间的邮件传输。

		- 3个阶段的应用层交互

			- 握手阶段
			- 邮件传输阶段
			- 关闭阶段

		- 特点

			- SMTP只能传送7位ASCII码文本内容

				- SMTP命令
				- 应答消息
				- 邮件内容

			- SMTP传送的邮件内容中不能包含CRLF

				- CRLF.CRLF标识邮件内容的结束
				- 如果需要在内容中包含，需要转义

			- SMTP是推动协议
			- SMTP使用TCP连接是持久的

	- 用户代理

		- 客户端软件

	- 邮件读取协议

		- POP3

			- 特点

				- 简单的邮件读取协议，功能有限
				- 使用传输层TCP

		- IMAP

			- 通过IMAP，收件人可以在服务器上操作文件夹

		- HTTP

### FTP

文件传送协议（File Transfer Protocol，FTP）是在互联网的两个主机间实现文件互传的网络应用，其应用层协议额称为FTP。

### P2P应用

### Socket编程基础

- socket基本概念
- 网络应用进程可以创建3中socket

	- 数据报类型套接字SOCK_DGRAM

		- 面向传输层UDP接口

	- 流式套接字SOCK_STREAM

		- 面向传输层TCP接口

	- 原始套接字SOCK_RAW

		- 面向网络层协议接口

			- IP
			- ICMP

- socket API系统调用及其过程

## 传输层

### 传输层基本服务

- 传输层功能

  传输层的核心任务是为应用进程之间提供端到端的逻辑通信服务。

	- 传输层寻址
	- 对报文进行分段和重组
	- 对报文进行差错检测
	- 实现进程间的端到端可靠数据传输控制
	- 面向应用层实现复用与分解
	- 实现端到端的流量控制
	- 拥塞控制

- 传输层协议

  传输层协议为运行在不同主机或不同端系统上的进程提供了逻辑通信服务。

### 传输层的复用与分解

- 无连接的多路复用与多路分解
- 面向连接的多路复用与分解

### 停-等协议与滑动窗口协议

- 可靠数据传输基本原理

	- 差错检测

	  利用差错编码实现数据报传输过程中的比特差错检测

	- 确认

	  接收方向发送方反馈接收状态

	- 重传

	  发送方重新发送接收方灭有正确接收的数据

	- 序号

	  确保数据按次序提交

	- 计时器

	  解决数据丢失问题

- 停-等协议

	- 特点

		- 每发送一个报文段后就停下来等待接收方的确认

	- 基本工作过程

		- 发送方发送经过差错编码和编号的报文段，等待接收方的确认
		- 接收方如果正确的接收报文段，即差错检测无误且序号正确，则接收报文段，并反馈信息给发送方
		- 发送方如果收到ACK，则继续发送报文段，否则重发刚刚发送的报文段

- 流水线协议

	- 改进

		- 增加分组序号范围
		- 协议的发送方和接送方必须缓存多个分组
		- 最典型的流水线可靠传输协议

			- 滑动窗口协议

				- GBN协议

					- 响应事件

						- 上层调用
						- 收到1个ACKn
						- 计时器超时

				- SR协议

### 用户数据报协议（UDP）

用户数据报协议UDP是Internet传输层协议，提供无连接、不可靠、数据报尽力传输服务。

- 特点

	- 轻量级传输层协议
	- 无连接、没有握手过程
	- 不可靠传输服务
	- 报文可能乱序
	- 没有拥塞控制机制

- 数据结构

	- 数据字典

		- 应用数据

	- 首部

		- 源端口号
		- 目的端口号
		- 长度
		- 校验和

- 校验和

	- 生成过程

		- 对所有参与运算的内容按16位求和
		- 求和过程中遇到的任何溢出都被回卷
		- 最后得到的和取反码
		- 填入UDP数据报的校验和字段

### 传输控制协议（TCP）

- 特点

	- 面向连接
	- 可靠
	- 有序
	- 字节流传输服务

- 结构

	- 首部

		- 源端口号
		- 目的端口号
		- 序号
		- 确认序号
		- 保留字段
		- URG、ACK、PSH、RST、SYN、FIN
		- 接收窗口
		- 校验和
		- 选项字段
		- 填充字段

	- 数据字段

- 连接管理

	- 建立连接

		- 三次握手

			- 主机A向主机B发出连接请求

				- SYN=1
				- seq=x

			- 请求到达主机B并提取SYN报文

				- 同意

					- 发回确认报文
					- SYNACK报文段

						- SYN=1
						- ACK=1
						- ack_seq=x+1
						- seq=y

			- 主机A收到SYNACK报文段

				- SYN=0
				- ACK=1
				- ack_seq=y+1
				- seq=x+1

	- 拆除连接

- 可靠数据传输

	- 应用数据被分割称TCP认为最适合发送的数据快，封装称TCP段，传递给IP
	- 当TCP发出一个段后，启动一个计时器，等待目的端确认收到这个报文段。

		- 目的端没有即时确认

			- 则认为报文丢失，重发这个报文段

		- 确认

			- 发送一个确认段

	- TCP首部中设有校验和字段，用户检测数据在传输过程中是否发生差错。

		- 如果收到报文段通过校验和检测，发现有差错

			- TCP将丢弃这个报文段和不确认收到此报文段，而将已连续接收到的应用层数据的最后一个字节序号加1，作为确认序号，向发送方发送确认段。

	- 由于TCP报文段封装到IP数据中传输，而IP数据报的到达可能会经过不同的路径从而造成顺序错乱，因此TCP报文段的到达也可能会失序。

		- 如果有必要，TCP将根据序号对收到的数据进行重新排序，将收到的数据以正确的顺序交给应用层

	- 由于存在网络延迟和重传机制，TCP的接收端可会收到多个重复的报文段，这时接收端需要根据序号把重复的报文丢弃
	- TCP能够提供流量控制。TCP连接的每一方都在建立连接时分配一定大小的接收缓冲空间。TCP的接收端只允许另一端发送接收端缓冲区所能接纳的数据。这样可以防止较快主机发送数据太空，导致使较慢主机的缓冲区溢出。

- 发送方主要事件

	- 从上层应用程序接收数据
	- 定时器超时
	- 收到ACK

## 网络层

网络层介于传输层和数据链路层之间，传输层提供端到端的进程间通信服务，数据链路层的功能则是实现物理链路直接相连的两个结点直接的数据帧传输服务，网络层关注的是如何将承载传输层报文端的网络层数据报从源主机送达目的主机。

### 网络层服务

- 转发（forwarding）

  当通过一条输入链路接收到一个分组后，路由器需要决策通过哪条输出链路将分组发送出去，并将分组从输入接口转移到输出接口。

- 路由选择（routing）

  当分组从源主机流向目的主机时，必须通过某种方式决定分组经过的路由或路径，计算分组所经过的路径的算法被称为路由选择算法，或称为路由算法。

### 数据报网络与虚电路网络

- 数据报网络

  按照目的主机地址进行路由选择的网络称为数据报网络。

- 虚电路网络

  虚电路网络在网络层提供面向连接的分组交换服务。
  通信之前，双方需要先建立虚电路，通信结束后再拆除虚电路。
  虚电路是再源主机到目的主机的一条路径上建立的一条网络层逻辑连接，为区别于电路交换中的电路，称之为虚电路。

	- 构成三要素

		- 从源主机到目的主机的一条路径
		- 该路径上的每条链路各有一个虚电路标识
		- 该路径上每台分组交换机的转发表中记录虚电路标识的接续关系。

### 网络互联与网络互联设备

- 异构网络互联

  异构网络主要是指两个网络的通信技术和运行协议的不同。

	- 实现策略

		- 协议转换

		  协议转换机制采用一类技持异构网络之间协议转换的网络中间设备，实现异构网络之间的数据分组的转换与转发

		- 构建虚拟互联网络

		  在现有异构网络基础上，构建一个同构的虚拟互联网络，异构网络均只需封装、转发虚拟互联网络分组，同时引入虚拟互联网中间设别互联异构网络，实现在异构网络间转发统一的虚拟互联网的数据分组。

- 路由器

  路由器是最典型的网络层设备。

	- 主要任务

		- 获取与维护路由信息以及转发分组

	- 组成

		- 输入端口

			- 数据处理过程

				- 输入端口负责从物理接口接收信号，还原数据链路层帧，提取IP数据报
				- 根据IP数据报的目的IP地址检索路由表，角色需要将该IP数据报交换到哪个输出端口
				- 确定输入端接收的分组要转发至哪个输出端口之后，分组需要交给交换结构来进行转发
				- 查找、转发、排队

		- 交换结构

		  当分组到达路由器后，通过在输入端口上的处理，分组将会被转发至哪个输出端口上已经确定，具体的转发工作则是交由交换结构来完成。

			- 基于内存交换
			- 基于总线交换
			- 基于网络交换

		- 输出端口
		- 路由处理器

		  路由处理器就是路由器的CPU，负责执行路由器的各种命令，包括路由协议的运行、路由计算以及路由表的更新维护。

### 网络层拥塞控制

- 网络拥塞

	- 发生拥塞的原因

		- 缓冲区容量有限
		- 传输线路的宽带有限
		- 网络结点的处理能力有限
		- 网络中某些部分发生了故障

- 流量感知路由

  流量感知路由是一种拥塞预防措施，可以在一定程度上缓解或预防拥塞的发生。

	- 网络震荡
	- 解决震荡现象

		- 多路径路由

		  两个区域间流量的传输分散到两条不同的链路上，从而使得其中任一链路上的负载都不会太大

		- 负载分发

		  将负载过大的链路上的流量，缓慢地转移至另一条链路上，而不是一次性将全部流量从一条链路转移到另一条链路上。

- 准入控制

  准入控制是一种广泛应用于虚电路网络拥塞预防技术。
  准入控制的基本思想是对新建虚电路审核，如果新建的虚电路会导致网络变的拥塞，那么网络拒绝建立该新虚电路。

- 流量调节

  在网络发生拥塞时，可以通过调整发送方向网络发送数据的速率来消除拥塞。

	- 发生拥塞通知上游降低发送速率方法

		- 抑制分组
		- 背压

- 负载脱落

  负载脱离是通过有选择地主动丢弃一些数据报，来减轻网络负载，从而缓解或消除拥塞。

### Internet网络层

- IP

  IP定义了如何封装上层协议（如UDP、TCP等）的报文段，定义了Internet网络层寻址（IP地址）以及如何转发IP的数据报等内容，是Internet网络层最核心的协议。

	- IPv6
	- IPv4

### 路由算法与路由协议

- 链路状态路由选择算法
- 距离向量路由选择算法
- 层次化路由选择
- Internet路由选择协议

	- RIP
	- OSPF
	- BGP

## 数据链路层与局域网

### 数据链路层服务

- 提供的服务

	- 组帧

	  数据链路层一般是将要传输的数据封装成帧，称为组帧或成帧。

	- 链路接入

	  链路接入，协调各结点使用共享的物理传输媒介或独占的通信链路实现帧的成功传输。

	- 可靠交付

	  可靠交付，即在相邻结点间经数据链路实现数据报的可靠传输。

	- 差错控制

	  差错控制，解决数据链路层帧在物理媒介上的传播过程中产生的比特翻转的差错。

### 差错控制

- 传输中的差错

  信号在信道传输过程中，会受到各种噪声的干扰，从而导致传输差错

	- 噪声

		- 随机噪声
		- 冲击噪声

- 差错控制的基本方式

	- 检错重发
	- 向前纠错
	- 反馈校验
	- 检错丢弃

- 典型差错码

	- 奇偶校验码
	- 汉明码
	- 循环冗余码

### 多路访问控制协议

- 信道划分MAC协议

	- MAC协议的根本任务是解决信道共享问题
	- 多路复用

		- 分多路复用（FDM）
		- 时分多路复用（TDM）
		- 波分多路复用（WDM）
		- 和码分多路复用（CMD）

- 随机访问MAC协议

	- ALOHA协议
	- 信道效率参数
	- 载波监听多路访问协议（CSMA）
	- 带冲突检测的载波监听多路访问（CSMA/CD）协议

- 受控接入MAC协议

### 局域网

- 数据链路层寻址域ARP

	- 链路层地址别名

		- MAC地址
		- 物理地址
		- 局域网地址

- 交换机

	- 以太网交换机的基本工作方式是存储-转发
	- 生成树协议可以解决以太网交换机自学习产生的兜圈问题
	- 以太网交换机的优点

		- 消除冲突
		- 支持异质链路
		- 网络管理

- 虚拟局域网

  虚拟局域网是一种基于交换机的逻辑分割（或限制）广播式的局域网应用形式。

	- 基于交换机端口划分
	- 基于MAC地址划分
	- 基于上层协议类型或地址划分

### 点对点链路协议

- PPP

	- 主要功能

		- 成帧

			- 确定一帧的开始和结束，帧格式支持错误检测

		- 链路控制协议

			- 用于启动线路、检测线路、协商参数以及关闭线路

		- 网络控制协议

			- 用于协商网络层选项，并且协商方法域使用的网络层协议独立

- HDLC协议

	- 三种成帧类型

		- 信息帧（I格式）
		- 管理帧（S格式）
		- 无序号帧（U格式）

## 物理层

### 数据通信基础

- 数据通信基本概念

	- 信息是对事物状态或存在方式的不确定性表达
	- 通信的本质就是在一点精确或近似地再生另一点信息
	- 在传输通道中传递信息的载体称为信号
	- 数据是对客观事物的性质状态以及相互关系等进行记载的符号及其组织
	- 信道是信号传递的介质，或信道是以传输介质为基础的信号通道
	- 数据通信系统

		- 信源
		- 发送设备
		- 信道
		- 接收设备
		- 信宿
		- 噪声源

- 模拟信号与数字信号间的转化

	- 模拟信号可以通过采样、量化、和编码等步骤变成数字信号
	- 数字信号可以通过解码、平滑等步骤恢复为模拟信号

- 数据通信方式

	- 按数据传输方向

		- 单向通信
		- 双向交替通信
		- 双向同时通信

	- 按二进制数据传输的时空顺序

		- 并行通信
		- 串行通信

	- 按发送和接收方对数据步调一致

		- 同步通信
		- 异步通信

### 物理介质

- 导引型传输介质

	- 架空明线
	- 双绞线电缆
	- 同轴电缆
	- 光纤

- 非导引型传输介质

	- 电磁波

		- 地波传输
		- 天波（电离层反射波）传输
		- 视线传播

### 信道与信道容量

- 信道的分类与模型

	- 信道的定义

	  信道是通信系统中链接发送端与接收端的通信设备，实现从发送端到接收端的信号传送。

		- 广义信道

			- 传输介质
			- 通信系统的一些变换装置

				- 发送设备
				- 接收设备
				- 天线
				- 调制器

		- 狭义信道

			- 传输介质

	- 信道的分类

		- 广义信道

			- 按功能

				- 调制信道

				  调制信道是指信号从调制器的输出端传输到解调器的输入端经过的部分

				- 编码信道

				  编码信道是指数字信号由编码器输出端传输到译码器输入端经过的部分

	- 信道传输特性

		- 恒参信道传输特性

			- 对信号幅值产生固定衰减
			- 对信号输出产生固定时延

		- 随参信道传输特性

			- 信号传输的衰减随时间随机变化
			- 信号传输的时延随时间随机变化
			- 存在多径传播现象

### 基带传输

- 数字信号在数字系统中的传播方式

	- 基带传输

		- 数字基带传输

			- 在信道中直接传输数字基带信号
			- 组成的系统：数字基带传输系统

				- 组成

					- 信号形成器
					- 信道
					- 接收滤波器
					- 抽样判决器
					- 同步提取

			- 数字基带信号码型

				- 单极不归零码（NRZ）
				- 双极不归零码
				- 单级归零码（RZ）
				- 双极归零码
				- 差分码
				- 多元码

			- 数字基带传输码型

				- AMI码
				- 双相码
				- 米勒码
				- CMI码
				- nBmB码
				- nBmT码

	- 频带传输

### 频带传输

- 频带传输的三种调解方式

	- 二进制数字调节

		- 三种基本调节

			- 二进制幅移键控（2ASK）
			- 二进制频移键控（2FSK）
			- 二进制相移键控（2PSK）

	- 多进制数字调节
	- 正交幅值调节（QAM）

		- 特点

			- 频带利用率高
			- 抗噪声能力强
			- 调制解调系统简单

### 物理层接口规程

- 物理层接口特性

	- 机械特性

	  机械特性也叫物理特性，指明通信实体间硬件连接接口的机械特点，如接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等。

	- 电气特性

	  电气特性规定了再物理连接上，导线的电气连接及有关电路的特性，一般会包括接收器和发送器电路特性的说明、信号的电平、最大传输速率的说明、与互连电缆相关的规则、发送器的输出阻抗、接收器的输入阻抗等电气参数。

	- 功能特性

	  功能特性指明物理接口各条信号线的用途，包括接口信号线功能的规定方法以及接口信号线的功能分类，具体分为数据信号线、控制信号线、定时信号线和接地信号线4类。

	- 规程特性

	  规程特性即通信协议，指明利用接口传输比特流的全过程，以及各项用于传输事件发生的合法顺序，包括事件的执行顺序和数据传输方式，即在物理连接建立、维持和交换信息时，DTE、DCE双方在各自电路上的动作序列等。

## 无线与移动网络

### 无线网络

- 基本组成

	- 无线主机
	- 无线链路
	- 基站
	- 网络基础设施

- 无线链路与有线链路

	- 信号强度的衰减
	- 干扰
	- 多径传播

### 移动网络

### 无线局域网IEEE 802.11

- 组成

	- 基站
	- 基本服务集

- 类型

	- 控制帧
	- 数据帧
	- 管理帧

### 蜂窝网络

### 移动IP网络

- 组成

	- 代理发现
	- 向归属代理注册
	- 数据报的间接路由选择

### 其他典型无线网络介质

## 网络安全基础

### 网络安全概述

- 基本概念

	- 网络安全通信所需的基本属性

		- 机密性

		  机密性是网络信息不被泄露给非授权的用户、实体，或供其利用的特性。

		- 消息完整性

		  消息完整性是网络信息未经授权不能进行改变的特性。

		- 可访问与可用性

		  可访问与可用性是网络信息可被授权实体访问并按需求使用的特性。

		- 身份认证

		  身份认证是对数据来源进行确认

	- 网络安全的基本特征

		- 相对性

		  相对性指的是网络永远只有相对的安全，没有绝对的安全，要时刻注意网络安全防护

		- 时效性

		  时效性能够反映处网络的不确定性和复杂性，新的漏洞和攻击方法层出不穷，攻击时间、攻击目标、攻击地点都不确定，需要做到随时随地的保护

		- 相关性
		- 不确定性
		- 复杂性
		- 重要性

	- 网络安全

	  网络安全是指网络系统的硬件、软件及其系统中的数据受到保护，不因偶然的或者恶意的原因而遭受到破坏、更改、泄露，系统连续可靠正常地运行，网络服务不中断。

- 网络安全威胁

	- 报文传输方面
	- DoS、DDoS
	- Internet网络威胁

		- 映射
		- 分组“嗅探”

	- IP欺骗

### 数据加密

- 加密五要素

	- M

		- M是可能明文的有限集称为铭文空间

	- C

		- C是可能密文的有限集称为密文空间

	- K

		- K是一切可能密钥构成的有限集称为密钥空间

	- E

		- E为加密算法，对于任一密钥，都能够有效地计算

	- D

		- D为解密算法，对于任一密钥，都能够有效地计算

- 传统加密方式

	- 替代密码
	- 换位密码

- 对称密钥加密

	- DES加密算法
	- 三重DES
	- AES加密算法
	- IDEA加密算法

- 非对称加密

	- Diffie-Hellman算法
	- RSA算法

### 消息完整性与数字签名

- 数字签名应满足的要求

	- 接收方能够确认或者证实发送方的签名，但不能伪造。
	- 发送方发出签名的消息给接收方后，就不能再否认他所签发的消息。
	- 接收方对已收到的签名消息不能否认，即有收报认证。
	- 第三者可以确认收发双发之间的消息传送，但不能伪造这一过程。

### 身份认证

### 密钥分发中心与证书认证机构

- KDC

	- 密匙分发中心

- CA

	- 认证中心

### 防火墙与入侵检测系统

- 防火墙基本概念

  防火墙是能够隔离组织内部网络与公告互联网，允许某些分组通过，而阻止其他分组进入或离开内部网络的软件、硬件或软硬件结合的一种设施。

- 防火墙分类

	- 无状态分组过滤器
	- 有状态分组过滤器
	- 应用网关

- 入侵检测系统IDS

  入侵检系统IDS是当观察潜在的恶意流量时，能够产生警告的设备或系统

### 网络安全协议

- 安全电子邮件

	- 安全需求

		- 机密性

		  传输过程中不被第三方阅读到邮件内容，只有真正的接收方才能阅读邮件

		- 完整性

		  支持在邮件传输过程中不被篡改，通过完整性验证可以判断处该邮件被篡改过。

		- 身份认证性

		  电子邮件发送方不能被假冒，接收方能够确认发送方的身份

		- 抗抵赖性

		  发送方无法对发送的邮件进行抵赖。接收方能够预防发送方抵赖自己发过的事实

- 安全套接字层SSL
- 虚拟专用VPN和IP安全协议IPSec

